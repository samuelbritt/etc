# Alias definitions

# Platform and machine specific aliases
if [ `uname` = "Linux" ] ; then
	# alias open='gnome-open'
	alias open='kde-open'
	export PDFVIEWER='kde-open'
	alias lss='ls --ignore=*.o --ignore=*.pyc'
	alias lsd='ls --group-directories-first' #works on ubuntu
	alias matcl='matlab -nosplash -nodesktop'
	alias mvim="gvim"
	alias mvimdiff="gvimdiff"
	alias mendeley="mendeleydesktop &"
	export EPD=/opt/epd/bin

elif [ `uname` = "Darwin" ] ; then
	alias vim='/Applications/MacVim.app/Contents/MacOS/Vim'
	export PDFVIEWER='open'
	alias gvim="mvim"
	alias gvimdiff="mvim -d"
	alias mvimdiff="mvim -d"
	alias ls="ls -p"
	alias lss="ls *.cpp *.h"
	alias tree="find . -print | sed -e 's;[^/]*/;|_;g;s;_|; |;g'"
	alias showhidden="defaults write com.apple.finder AppleShowAllFiles TRUE; killall Finder"
	alias hidehidden="defaults write com.apple.finder AppleShowAllFiles FALSE; killall Finder"
	export EPD=/Library/Frameworks/Python.framework/Versions/Current/bin
fi

# Common alias definitions.
alias ll='ls -hl'
alias la='ls -A'
alias lal='ll -A'

alias cd..='cd ..'
alias ..='cd ..'
alias ...='cd ../..'
alias gitroot='cd $(git root)'
alias hgroot='cd $(hg root)'
alias dirs="dirs -v"
alias pu='pushd'
alias po='popd'
alias ph='pushd ~'

alias grep="grep --color=auto"
alias today='date +%F'
alias now='date +%F-%H%M'
alias bc='bc -l'
alias scr='screen -DR'
alias df='df -H'
alias du='du -h'
alias pacman='pacman-color'
hash colordiff > /dev/null 2>&1 && alias diff='colordiff -u'
hash colormake > /dev/null 2>&1 && alias make='colormake'
alias pylab='ipython --pylab'
alias epython='$EPD/python'
alias eipython='$EPD/ipython'
alias epylab='eipython -pylab'
alias tarz='tar czf'
alias untarz='tar xzf'
alias cleanlatex='rm -f *.aux *.bbl *.blg *.fdb_latexmk *.fls *.log *.out'
alias subl='/cygdrive/C/Program\ Files/Sublime\ Text\ 3/sublime_text.exe'
alias mytop="htop -u $(whoami)"

# tmux helpers
alias tls='tmux list-sessions'
function t {
	# t ls                you probably meant "tls"
	# t <open-session>    attach open session "<open-session>"
	# t <new-session>     create new session named "new-session" 
	# t                   attach last open session
	if [ -n "$1" ]; then
		if [[ $1 = "ls" ]]; then
			echo "tmux list-sessions"
			command tmux list-sessions
		else
			local sessions=$(tmux -q list-sessions 2>/dev/null | cut -f 1 -d ':')
			local isopen=false
			for session in $sessions; do
				if [[ $session = $1 ]]; then
					isopen=true
					break
				fi
			done
			if [ "$isopen" = true ]; then
				echo "tmux attach-session -t $1"
				command tmux attach-session -t $1
			else
				echo "tmux new-session -s $1"
				command tmux new-session -s $1
			fi
		fi
	else
		echo "tmux attach-session"
		command tmux attach-session
	fi
}

# bad typing with git
alias gi=git

# bad typing with hg
alias gh=hg
function h {
	case "$1" in
		gst | gts)
			command hg st "${@:2}"
			;;
		gsum)
			command hg sum "${@:2}"
			;;
		gic | gci)
			command hg ci "${@:2}"
			;;
		gfe)
			command hg fe "${@:2}"
			;;
		gdiff | gidff)
			command hg diff "${@:2}"
			;;
		glate | galte)
			command hg late "${@:2}"
			;;
		*)
			# just pass command through
			command "$0" "$@"
			;;
	esac
}


# recursive mkdir and cd if successful
function mkcd {
	mkdir -p "$@" && builtin cd "$@"
}

# cd and ls
function cl {
	cd "$@" && ls
}

# create a pretty-printed man page
function manp {
	file=/tmp/man_"$@".pdf
	man -t "$@" | ps2pdf - $file && open $file
}

# vim: set ft=sh nospell:
